<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>Crear Producto - Admin PetEats</title>
    <link rel="stylesheet" href="../../css/style.css" />
</head>
<body style="min-height: 100vh; display: flex; flex-direction: column;">

    <div id="header-placeholder"></div>

    <main class="admin-content" style="flex: 1;">
        <section class="content">
            <h2>Crear Producto</h2>

            <form id="crearProductoForm">
                <label>Nombre</label>
                <input type="text" name="PRD_NOMBRE" required>

                <label>Precio</label>
                <input type="number" step="0.01" name="PRD_PRECIO" required>

                <label>Imagen (URL)</label>
                <input type="url" name="PRD_IMAGEN" required>

                <label>Descripción</label>
                <textarea name="PRD_DESCRIPCION" required></textarea>

                <label>Stock</label>
                <input type="number" name="PRD_STOCK" required>

                <label>Categoría</label>
                <select name="CAT_ID" id="categoriasSelect" required></select>

                <label>Animal</label>
                <select name="T_ANIMAL_ID" id="animalesSelect" required></select>

                <label>Estado</label>
                <select name="PRD_ESTADO" required>
                    <option value="ACT">Activo</option>
                    <option value="INA">Inactivo</option>
                </select>

                <button type="submit" class="btn-crear">Guardar</button>
            </form>
        </section>
    </main>

    <div id="footer-placeholder"></div>

    <script src="../../js/productos.js"></script>
    <script>
        
       cargarCategoriasYAnimales();

        document.getElementById('crearProductoForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const form = e.target;
            const producto = {
                PRD_NOMBRE: form.PRD_NOMBRE.value,
                PRD_PRECIO: parseFloat(form.PRD_PRECIO.value),
                PRD_IMAGEN: form.PRD_IMAGEN.value,
                PRD_DESCRIPCION: form.PRD_DESCRIPCION.value,
                PRD_STOCK: parseInt(form.PRD_STOCK.value),
                CAT_ID: parseInt(form.CAT_ID.value),
                T_ANIMAL_ID: parseInt(form.T_ANIMAL_ID.value),
                PRD_ESTADO: form.PRD_ESTADO.value
            };
            crearProducto(producto); // Llama a la función para crear el producto
        });

    </script>
    <script src="../../js/layout.js"></script>

</body>
</html>
